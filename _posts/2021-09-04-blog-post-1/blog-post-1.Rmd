---
title: "Using Ecuador to Show My Mum the Effectiveness Of Vaccines"
description: |
  A short description of the post.
author:
  - name: Nora Jones
    url: https://example.com/norajones
date: 09-04-2021
output:
  distill::distill_article:
    self_contained: false
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
#libraries
library(tidyverse)
#devtools::install_github("RamiKrispin/coronavirus")
library(coronavirus)
#devtools::install_github("joachim-gassen/tidycovid19")
library(tidycovid19)
```

# Introdction
I know I've reached a low point in my life when I'm listening to a Lowfi playlist that exclusively samples Bojack Horseman quotes. If that doesnt say I'm dead inside but I have work to do I'm not sure what does. My mum has been really anti-vax with all the covid stuff, she says she doesn't trust the vaccines. I have had to watch 30 minutes of anti-vax videos/articles yesterday and debunk all of them. One of them was a 10 minute rant by some random guy in a Barbados town hall meeting who was talking about how Covid-19 was a man-made bio-weapon by the Chinese government. Ecuador does not have very strong data, but even crunching their numbers (even with all the NA's) can disprove a lot of the claims in these anti-vax articles/videos but I think the easiest to look at with data is the effectiveness of vaccines. This video (link) claims that vaccines don't decrease the number of deaths, transmissions, or hospitalizations (I mean they also claim that the vaccines arent vaccines but whatever).
1) vaccines dont do anything (hospitalisations, deaths, etc)
2) governments are not accurately reporting


# Data Description
To check this I need data on
Number of Cases: John Hopkins
Number of Vaccines: 

## John Hopkins Data
Variables
- date
- province: province/state (it is NA for every observaiton in this dataset)
- country: country of intrest, all Ecuador
- lat: latitude of centre of geographic region (all the same)
- long: latitude of centre of geographic region (all the same)
- type: type of cases out of confirmed, death, and recovered.
- Cases: number of those types of cases

Data Issues
- about -448000 cases in august of this year (recovered)
- there are a lot of negative cases in all the categories for some reason, making a cumulative variable to see if that changes

```{r, John Hopkins}
#coronavirus package data

#make long dataset for plotting
ecuador_corona_new <- coronavirus %>%
  filter(country=="Ecuador") %>%
  select(-c(province, country, lat, long))

#plot
ggplot(ecuador_corona_new, aes(x=date, y=cases, colour=type)) + geom_line()

#make wide dataset to understand values
ecuador_corona_cum <- ecuador_corona_new %>%
  pivot_wider(names_from = type, values_from=cases) %>%
  mutate(cum_cases = cumsum(confirmed),
         cum_deaths = cumsum(death),
         cum_recovered = cumsum(recovered)) %>%
  select(-c(confirmed, death, recovered)) %>%
  pivot_longer(cols=cum_cases:cum_recovered, names_to="type", values_to = "cases")

#plot
ggplot(ecuador_corona_cum, aes(x=date, y=cases, colour=type)) + geom_line()

#cases-recovered vs death
ecuador_corona_gap <- ecuador_corona_new %>%
  pivot_wider(names_from = type, values_from=cases) %>%
  mutate(cum_cases = cumsum(confirmed),
         cum_deaths = cumsum(death),
         cum_recovered = cumsum(recovered)) %>%
  mutate(case_min_rec = cum_cases-cum_recovered) %>%
  select(-c(confirmed, death, recovered, cum_cases, cum_recovered)) %>%
  pivot_longer(cols=cum_deaths:case_min_rec, names_to="type", values_to = "cases")

#plot
ggplot(ecuador_corona_gap, aes(x=date, y=cases, colour=type)) + geom_line()
  
```


```{r}
#tidycovid19 package data

#testing, vaccine, etc reports

#data
owid_data <- download_owid_data(silent = FALSE, cached = TRUE)%>%
  filter(iso3c=="ECU") %>%
  select(-c(iso3c, hosp_patients,icu_patients,timestamp, tests_units, positive_rate)) %>%
  pivot_longer(cols=c(total_tests,total_vaccinations), names_to = "measure", values_to = "value")

#plot
ggplot(owid_data, aes(x=date, y=value, colour=measure))+
  geom_line()

#google trends

#data
gtrend_data <- download_google_trends_data(cached=TRUE)%>%
  filter(iso3c=="ECU")

#plot
ggplot(gtrend_data, aes(x=date, y=gtrends_score)) +
  geom_line()


#lockdown and restriction details

#data 1
ACAPS_data <- download_acaps_npi_data(cached=TRUE) %>%
  filter(iso3c=="ECU")

# data 2
oxford_data <- download_oxford_npi_data(cached=TRUE) %>%
  filter(iso3c=="ECU")

# more covid case reports
# data
ECDC_cases <- download_ecdc_covid19_data(cached=TRUE) %>%
  filter(iso3c=="ECU")%>%
  select(c(date,cases,deaths)) %>%
  pivot_longer(cols=c(cases,deaths), names_to = "type", values_to = "number")

# plot these
ggplot(ECDC_cases, aes(x=date, y=number, colour=type))+
  geom_line()


# google mobility reports
gmobility <- download_google_cmr_data(cached=TRUE)%>%
  filter(iso3c=="ECU")

```


